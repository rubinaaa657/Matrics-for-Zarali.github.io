<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator for Zarali</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="pics/icons8-лягушка-30.png">

</head>
<body>
     <div class="header">
    <h6><a href="index.html" class="rar-link">RaR Productions</a></h6>
    <ul class="navigation">
        <li class="list active"><a href="abouts.html">О матрицах</a></li>
        <li class="list active"><a href="opr.html">Определитель</a></li>
        <li class="list active"><a href="cramer.html">Метод Крамера</a></li>
        <li class="list active"><a href="back.html">Обратная матрица</a></li>
        <li class="list active"><a href="gauss.html">Метод Гаусса</a></li>
    </ul>
</div>
<h1>Определитель</h1>
<h6>Числовая характеристика матрицы </h6>
<p></p>
<h6>Определитель обозначается заглавной буквой латинского алфавита |A|</h6>
<br>
<h4 class="circle">Определитель матрицы</h4>
<h6>Определитель матрицы может быть найден методом треугольников, методом диагоналей и методом миноров.</h6>
<p></p>
<h6>Выберите размер матрицы:</h6>

<select id="rowsopr" class="size-select-opr">  
  <option value="2" selected>2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
</select> x 
<select id="colsopr" class="size-select-opr">  
  <option value="2" selected>2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
</select>
<p></p>
<h6>Введите матрицу A:</h6>
<table class="matrixopr"><tbody></tbody></table>
<p></p>
<h6>Определитель:</h6>
<table class="matrixResultopr"><tbody></tbody></table>

<button class="btn" onclick="calculateDeterminant()">Вычислить</button>
    <p></p>

<script>
const rowsSelect = document.getElementById('rowsopr');
const colsSelect = document.getElementById('colsopr');

function syncSize(e) {
    const val = e.target.value;
    rowsSelect.value = val;
    colsSelect.value = val;
    generateMatrixopr();
}

rowsSelect.addEventListener('change', syncSize);
colsSelect.addEventListener('change', syncSize);

function generateMatrixopr() {
    const size = parseInt(rowsSelect.value);
    const table = document.querySelector('.matrixopr tbody');
    table.innerHTML = '';
    
    for (let i = 0; i < size; i++) {
        const row = document.createElement('tr');
        for (let j = 0; j < size; j++) {
            const cell = document.createElement('td');
            const input = document.createElement('input');
            input.type = 'number';
            input.style.width = "50px"; 
            input.placeholder = `a${i+1}${j+1}`;
            cell.appendChild(input);
            row.appendChild(cell);
        }
        table.appendChild(row);
    }
    document.querySelector('.matrixResultopr tbody').innerHTML = '';
}

function getDeterminant(matrix) {
    const n = matrix.length;
    if (n === 1) return matrix[0][0];
    if (n === 2) return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];

    let det = 0;
    for (let i = 0; i < n; i++) {
        const subMatrix = matrix.slice(1).map(row => 
            row.filter((_, colIndex) => colIndex !== i)
        );
        det += Math.pow(-1, i) * matrix[0][i] * getDeterminant(subMatrix);
    }
    return det;
}

function calculateDeterminant() {
    const matrix = [];
    const rows = document.querySelectorAll('.matrixopr tbody tr');
    
    rows.forEach(row => {
        const rowValues = [];
        row.querySelectorAll('input').forEach(input => {
            rowValues.push(parseFloat(input.value) || 0);
        });
        matrix.push(rowValues);
    });

    const result = getDeterminant(matrix);
    const resultTable = document.querySelector('.matrixResultopr tbody');
    resultTable.innerHTML = `<tr><td style="font-weight: bold; font-size: 1.2em;">|A| = ${result}</td></tr>`;
}

generateMatrixopr();

</script>




<!-- <p></p>
<h4 class="circle">Алгебраическое дополнение</h4>
<h6>Алгебраическим дополнением элемента aij матрицы называется минор этого элемента, умноженный на (-1)</h6> -->

</body>
</html>
